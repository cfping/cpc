!function(){function t(e){var n="function"==typeof Map?new Map:void 0;return t=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,e,n){if(b())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var a=new(t.bind.apply(t,r));return n&&k(a,n.prototype),a}(t,arguments,w(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),k(e,t)},t(e)}function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function s(e,a,i,o){var s=a&&a.prototype instanceof c?a:c,l=Object.create(s.prototype);return n(l,"_invoke",function(e,n,a){var i,o,s,c=0,l=a||[],f=!1,y={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,o=0,s=t,y.n=n,u}};function p(e,n){for(o=e,s=n,r=0;!f&&c&&!a&&r<l.length;r++){var a,i=l[r],p=y.p,h=i[2];e>3?(a=h===n)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=t):i[0]<=p&&((a=e<2&&p<i[1])?(o=0,y.v=n,y.n=i[1]):p<h&&(a=e<3||i[0]>n||n>h)&&(i[4]=e,i[5]=n,y.n=h,o=0))}if(a||e>1)return u;throw f=!0,n}return function(a,l,h){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),o=l,s=h;(r=o<2?t:s)||!f;){i||(o?o<3?(o>1&&(y.n=-1),p(o,s)):y.n=s:y.v=s);try{if(c=2,i){if(o||(a="next"),r=i[a]){if(!(r=r.call(i,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,o<2&&(o=0)}else 1===o&&(r=i.return)&&r.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=t}else if((r=(f=y.n<0)?s:e.call(n,y))!==u)break}catch(r){i=t,o=1,s=r}finally{c=1}}return{value:r,done:f}}}(e,i,o),!0),l}var u={};function c(){}function l(){}function f(){}r=Object.getPrototypeOf;var y=[][i]?r(r([][i]())):(n(r={},i,function(){return this}),r),p=f.prototype=c.prototype=Object.create(y);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,n(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,n(p,"constructor",f),n(f,"constructor",l),l.displayName="GeneratorFunction",n(f,o,"GeneratorFunction"),n(p),n(p,o,"Generator"),n(p,i,function(){return this}),n(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:s,m:h}})()}function n(t,e,r,a){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}n=function(t,e,r,a){function o(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[e]=r:(o("next",0),o("throw",1),o("return",2))},n(t,e,r,a)}function r(t,e,n,r,a,i,o){try{var s=t[i](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,u,"next",t)}function u(t){r(o,a,i,s,u,"throw",t)}s(void 0)})}}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,a=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=c(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){p(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function p(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function d(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e,n){return e=w(e),function(t,e){if(e&&("object"==i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,b()?Reflect.construct(e,n||[],w(t).constructor):e.apply(t,n))}function b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(b=function(){return!!t})()}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}System.register(["./index-legacy-yXld3aQD.js","./index-legacy-BqhMj51B.js","./vendor-legacy-Byg8CSfW.js"],function(n,r){"use strict";var c,l,f,h,m,b,w,k,T,O,P,_,j,I,B,M,x;return{setters:[function(t){c=t.r},function(t){l=t.B,f=t.s,h=t.k,m=t.a,b=t.e,w=t.t,k=t.i,T=t.n,O=t.b,P=t.I,_=t.d,j=t.f,I=t.h,B=t.j,M=t.l,x=t.m},null],execute:function(){var r=function(t){function e(t){var n=t.domain;return v(this,e),g(this,e,['Invalid domain "'.concat(f(n),'".'),{metaMessages:["Must be a valid EIP-712 domain."]}])}return S(e,t),d(e)}(l),E=function(t){function e(t){var n=t.primaryType,r=t.types;return v(this,e),g(this,e,["Invalid primary type `".concat(n,"` must be one of `").concat(JSON.stringify(Object.keys(r)),"`."),{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]}])}return S(e,t),d(e)}(l),R=function(t){function e(t){var n=t.type;return v(this,e),g(this,e,['Struct type "'.concat(n,'" is invalid.'),{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"}])}return S(e,t),d(e)}(l);function A(t){var e=t.domain,n=void 0===e?{}:e,a=t.message,o=t.primaryType,c=y({EIP712Domain:G({domain:n})},t.types);!function(t){var e=t.domain,n=t.message,a=t.primaryType,o=t.types,c=function(t,e){var n,r=u(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=a.name,l=a.type,f=e[i],y=l.match(k);if(y&&("number"==typeof f||"bigint"==typeof f)){var p=s(y,3),h=(p[0],p[1]),d=p[2];T(f,{signed:"int"===h,size:Number.parseInt(d)/8})}if("address"===l&&"string"==typeof f&&!O(f))throw new P({address:f});var m=l.match(_);if(m){var v=s(m,2),g=(v[0],v[1]);if(g&&j(f)!==Number.parseInt(g))throw new I({expectedSize:Number.parseInt(g),givenSize:j(f)})}var b=o[l];b&&(V(l),c(b,f))}}catch(w){r.e(w)}finally{r.f()}};if(o.EIP712Domain&&e){if("object"!==i(e))throw new r({domain:e});c(o.EIP712Domain,e)}if("EIP712Domain"!==a){if(!o[a])throw new E({primaryType:a,types:o});c(o[a],n)}}({domain:n,message:a,primaryType:o,types:c});var l=["0x1901"];return n&&l.push(function(t){var e=t.domain,n=t.types;return C({data:e,primaryType:"EIP712Domain",types:n})}({domain:n,types:c})),"EIP712Domain"!==o&&l.push(C({data:a,primaryType:o,types:c})),h(m(l))}function C(t){var e=q({data:t.data,primaryType:t.primaryType,types:t.types});return h(e)}function q(t){var e,n=t.data,r=t.primaryType,a=t.types,i=[{type:"bytes32"}],o=[H({primaryType:r,types:a})],c=u(a[r]);try{for(c.s();!(e=c.n()).done;){var l=e.value,f=s(D({types:a,name:l.name,type:l.type,value:n[l.name]}),2),y=f[0],p=f[1];i.push(y),o.push(p)}}catch(h){c.e(h)}finally{c.f()}return b(i,o)}function H(t){var e=t.primaryType,n=t.types,r=w(function(t){var e=t.primaryType,n=t.types,r="",a=N({primaryType:e,types:n});a.delete(e);var i,s=[e].concat(o(Array.from(a).sort())),c=u(s);try{for(c.s();!(i=c.n()).done;){var l=i.value;r+="".concat(l,"(").concat(n[l].map(function(t){var e=t.name,n=t.type;return"".concat(n," ").concat(e)}).join(","),")")}}catch(f){c.e(f)}finally{c.f()}return r}({primaryType:e,types:n}));return h(r)}function N(t){var e=t.primaryType,n=t.types,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,a=e.match(/^[0-9A-Z_a-z]*/),i=null==a?void 0:a[0];if(r.has(i)||void 0===n[i])return r;r.add(i);var o,s=u(n[i]);try{for(s.s();!(o=s.n()).done;){N({primaryType:o.value.type,types:n},r)}}catch(c){s.e(c)}finally{s.f()}return r}function D(t){var e=t.types,n=t.name,r=t.type,a=t.value;if(void 0!==e[r])return[{type:"bytes32"},h(q({data:a,primaryType:r,types:e}))];if("bytes"===r){var i=a.length%2?"0":"";return a="0x".concat(i+a.slice(2)),[{type:"bytes32"},h(a)]}if("string"===r)return[{type:"bytes32"},h(w(a))];if(r.lastIndexOf("]")===r.length-1){var o=r.slice(0,r.lastIndexOf("[")),u=a.map(function(t){return D({name:n,type:o,types:e,value:t})});return[{type:"bytes32"},h(b(u.map(function(t){return s(t,1)[0]}),u.map(function(t){return s(t,2)[1]})))]}return[{type:r},a]}function G(t){var e=t.domain;return["string"==typeof(null==e?void 0:e.name)&&{name:"name",type:"string"},(null==e?void 0:e.version)&&{name:"version",type:"string"},("number"==typeof(null==e?void 0:e.chainId)||"bigint"==typeof(null==e?void 0:e.chainId))&&{name:"chainId",type:"uint256"},(null==e?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(null==e?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function V(t){if("address"===t||"bool"===t||"string"===t||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new R({type:t})}function L(t,e){return h(function(t){var e="string"==typeof t?B(t):"string"==typeof t.raw?t.raw:M(t.raw),n=B("".concat("Ethereum Signed Message:\n").concat(j(e)));return m([n,e])}(t),e)}var F,z,W=n("getSDKVersion",function(){return"9.1.0"}),U=function(t){return t.toString(16).padStart(2,"0")},J=function(){return"undefined"!=typeof window?(t=new Uint8Array(10/2),window.crypto.getRandomValues(t),Array.from(t,U).join("")):(new Date).getTime().toString(36);var t},K=d(function t(){v(this,t)});n("MessageFormatter",K),K.makeRequest=function(t,e){return{id:J(),method:t,params:e,env:{sdkVersion:W()}}},K.makeResponse=function(t,e,n){return{id:t,success:!0,version:n,data:e}},K.makeErrorResponse=function(t,e,n){return{id:t,success:!1,error:e,version:n}},n("Methods",F),function(t){t.sendTransactions="sendTransactions",t.rpcCall="rpcCall",t.getChainInfo="getChainInfo",t.getSafeInfo="getSafeInfo",t.getTxBySafeTxHash="getTxBySafeTxHash",t.getSafeBalances="getSafeBalances",t.signMessage="signMessage",t.signTypedMessage="signTypedMessage",t.getEnvironmentInfo="getEnvironmentInfo",t.getOffChainSignature="getOffChainSignature",t.requestAddressBook="requestAddressBook",t.wallet_getPermissions="wallet_getPermissions",t.wallet_requestPermissions="wallet_requestPermissions"}(F||n("Methods",F={})),n("RestrictedMethods",z),function(t){t.requestAddressBook="requestAddressBook"}(z||n("RestrictedMethods",z={}));var Z=d(function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v(this,t),this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer="undefined"==typeof window,this.isValidMessage=function(t){var n=t.origin,r=t.data,a=t.source,i=!r,o=!e.isServer&&a===window.parent,s=void 0!==r.version&&parseInt(r.version.split(".")[0]),u="number"==typeof s&&s>=1,c=!0;return Array.isArray(e.allowedOrigins)&&(c=void 0!==e.allowedOrigins.find(function(t){return t.test(n)})),!i&&o&&u&&c},this.logIncomingMessage=function(t){},this.onParentMessage=function(t){e.isValidMessage(t)&&(e.debugMode&&e.logIncomingMessage(t),e.handleIncomingMessage(t.data))},this.handleIncomingMessage=function(t){var n=t.id,r=e.callbacks.get(n);r&&(r(t),e.callbacks.delete(n))},this.send=function(t,n){var r=K.makeRequest(t,n);if(e.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(r,"*"),new Promise(function(t,n){e.callbacks.set(r.id,function(e){e.success?t(e):n(new Error(e.error))})})},this.allowedOrigins=n,this.debugMode=r,this.isServer||window.addEventListener("message",this.onParentMessage)}),$=n("isObjectEIP712TypedData",function(t){return"object"===i(t)&&null!=t&&"domain"in t&&"types"in t&&"message"in t});c();var Q=function(){return d(function t(e){v(this,t),this.communicator=e},[{key:"getBySafeTxHash",value:(i=a(e().m(function t(n){var r;return e().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}throw new Error("Invalid safeTxHash");case 1:return t.n=2,this.communicator.send(F.getTxBySafeTxHash,{safeTxHash:n});case 2:return r=t.v,t.a(2,r.data)}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"signMessage",value:(r=a(e().m(function t(n){var r,a;return e().w(function(t){for(;;)switch(t.n){case 0:return r={message:n},t.n=1,this.communicator.send(F.signMessage,r);case 1:return a=t.v,t.a(2,a.data)}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"signTypedMessage",value:(n=a(e().m(function t(n){var r;return e().w(function(t){for(;;)switch(t.n){case 0:if($(n)){t.n=1;break}throw new Error("Invalid typed data");case 1:return t.n=2,this.communicator.send(F.signTypedMessage,{typedData:n});case 2:return r=t.v,t.a(2,r.data)}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"send",value:(t=a(e().m(function t(n){var r,a,i,o;return e().w(function(t){for(;;)switch(t.n){case 0:if(r=n.txs,a=n.params,r&&r.length){t.n=1;break}throw new Error("No transactions were passed");case 1:return i={txs:r,params:a},t.n=2,this.communicator.send(F.sendTransactions,i);case 2:return o=t.v,t.a(2,o.data)}},t,this)})),function(e){return t.apply(this,arguments)})}]);var t,n,r,i}(),X=n("RPC_CALLS",{eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"}),Y={defaultBlockParam:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:"latest"},returnFullTxObjectParam:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},blockNumberToHex:function(t){return Number.isInteger(t)?"0x".concat(t.toString(16)):t}},tt=function(){return d(function t(e){var n=this;v(this,t),this.communicator=e,this.call=this.buildRequest({call:X.eth_call,formatters:[null,Y.defaultBlockParam]}),this.getBalance=this.buildRequest({call:X.eth_getBalance,formatters:[null,Y.defaultBlockParam]}),this.getCode=this.buildRequest({call:X.eth_getCode,formatters:[null,Y.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:X.eth_getStorageAt,formatters:[null,Y.blockNumberToHex,Y.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:X.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:X.eth_getBlockByHash,formatters:[null,Y.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:X.eth_getBlockByNumber,formatters:[Y.blockNumberToHex,Y.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:X.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:X.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:X.eth_getTransactionCount,formatters:[null,Y.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:X.eth_gasPrice}),this.getEstimateGas=function(t){return n.buildRequest({call:X.eth_estimateGas})([t])},this.setSafeSettings=this.buildRequest({call:X.safe_setSettings})},[{key:"buildRequest",value:function(t){var n=this,r=t.call,i=t.formatters;return function(){var t=a(e().m(function t(a){var o,s;return e().w(function(t){for(;;)switch(t.n){case 0:return i&&Array.isArray(a)&&i.forEach(function(t,e){t&&(a[e]=t(a[e]))}),o={call:r,params:a||[]},t.n=1,n.communicator.send(F.rpcCall,o);case 1:return s=t.v,t.a(2,s.data)}},t)}));return function(e){return t.apply(this,arguments)}}()}}])}(),et=4001,nt=function(t){function e(t,n,r){var a;return v(this,e),(a=g(this,e,[t])).code=n,a.data=r,Object.setPrototypeOf(a,e.prototype),a}return S(e,t),d(e)}(t(Error)),rt=function(){return d(function t(e){v(this,t),this.communicator=e},[{key:"getPermissions",value:(n=a(e().m(function t(){var n;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(F.wallet_getPermissions,void 0);case 1:return n=t.v,t.a(2,n.data)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"requestPermissions",value:(t=a(e().m(function t(n){var r;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.isPermissionRequestValid(n)){t.n=1;break}throw new nt("Permissions request is invalid",et);case 1:return t.p=1,t.n=2,this.communicator.send(F.wallet_requestPermissions,n);case 2:return r=t.v,t.a(2,r.data);case 3:throw t.p=3,t.v,new nt("Permissions rejected",et);case 4:return t.a(2)}},t,this,[[1,3]])})),function(e){return t.apply(this,arguments)})},{key:"isPermissionRequestValid",value:function(t){return t.every(function(t){return"object"===i(t)&&Object.keys(t).every(function(t){return!!Object.values(z).includes(t)})})}}]);var t,n}(),at=function(t,e){return e.some(function(e){return e.parentCapability===t})},it=function(t,e,n,r){var a,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(a=t[u])&&(s=(o<3?a(s):o>3?a(e,n,s):a(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},ot=function(){return d(function t(e){v(this,t),this.communicator=e},[{key:"getChainInfo",value:(p=a(e().m(function t(){var n;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(F.getChainInfo,void 0);case 1:return n=t.v,t.a(2,n.data)}},t,this)})),function(){return p.apply(this,arguments)})},{key:"getInfo",value:(f=a(e().m(function t(){var n;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(F.getSafeInfo,void 0);case 1:return n=t.v,t.a(2,n.data)}},t,this)})),function(){return f.apply(this,arguments)})},{key:"experimental_getBalances",value:(l=a(e().m(function t(){var n,r,a,i=arguments;return e().w(function(t){for(;;)switch(t.n){case 0:return n=(i.length>0&&void 0!==i[0]?i[0]:{}).currency,r=void 0===n?"usd":n,t.n=1,this.communicator.send(F.getSafeBalances,{currency:r});case 1:return a=t.v,t.a(2,a.data)}},t,this)})),function(){return l.apply(this,arguments)})},{key:"check1271Signature",value:(c=a(e().m(function t(n){var r,a,i,o,s,u=arguments;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"0x",t.n=1,this.getInfo();case 1:return a=t.v,i=x({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,r]}),o={call:X.eth_call,params:[{to:a.safeAddress,data:i},"latest"]},t.p=2,t.n=3,this.communicator.send(F.rpcCall,o);case 3:return s=t.v,t.a(2,"0x1626ba7e"===s.data.slice(0,10).toLowerCase());case 4:return t.p=4,t.v,t.a(2,!1)}},t,this,[[2,4]])})),function(t){return c.apply(this,arguments)})},{key:"check1271SignatureBytes",value:(u=a(e().m(function t(n){var r,a,i,o,s,u=arguments;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"0x",t.n=1,this.getInfo();case 1:return a=t.v,i=x({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,r]}),o={call:X.eth_call,params:[{to:a.safeAddress,data:i},"latest"]},t.p=2,t.n=3,this.communicator.send(F.rpcCall,o);case 3:return s=t.v,t.a(2,"0x20c13b0b"===s.data.slice(0,10).toLowerCase());case 4:return t.p=4,t.v,t.a(2,!1)}},t,this,[[2,4]])})),function(t){return u.apply(this,arguments)})},{key:"calculateMessageHash",value:function(t){return L(t)}},{key:"calculateTypedMessageHash",value:function(t){var e="object"===i(t.domain.chainId)?t.domain.chainId.toNumber():Number(t.domain.chainId),n=t.primaryType;if(!n){var r=Object.values(t.types),a=Object.keys(t.types).filter(function(t){return r.every(function(e){return e.every(function(e){return e.type.replace("[","").replace("]","")!==t})})});if(0===a.length||a.length>1)throw new Error("Please specify primaryType");n=a[0]}return A({message:t.message,domain:y(y({},t.domain),{},{chainId:e,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt}),types:t.types,primaryType:n})}},{key:"getOffChainSignature",value:(s=a(e().m(function t(n){var r;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(F.getOffChainSignature,n);case 1:return r=t.v,t.a(2,r.data)}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"isMessageSigned",value:(o=a(e().m(function t(n){var r,i,o,s=this,u=arguments;return e().w(function(t){for(;;)switch(t.n){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:"0x","string"==typeof n&&(i=function(){var t=a(e().m(function t(){var a,i;return e().w(function(t){for(;;)switch(t.n){case 0:return a=s.calculateMessageHash(n),t.n=1,s.isMessageHashSigned(a,r);case 1:return i=t.v,t.a(2,i)}},t)}));return function(){return t.apply(this,arguments)}}()),$(n)&&(i=function(){var t=a(e().m(function t(){var a,i;return e().w(function(t){for(;;)switch(t.n){case 0:return a=s.calculateTypedMessageHash(n),t.n=1,s.isMessageHashSigned(a,r);case 1:return i=t.v,t.a(2,i)}},t)}));return function(){return t.apply(this,arguments)}}()),!i){t.n=2;break}return t.n=1,i();case 1:return o=t.v,t.a(2,o);case 2:throw new Error("Invalid message type");case 3:return t.a(2)}},t)})),function(t){return o.apply(this,arguments)})},{key:"isMessageHashSigned",value:(r=a(e().m(function t(n){var r,a,i,o,s,u=arguments;return e().w(function(t){for(;;)switch(t.n){case 0:r=u.length>1&&void 0!==u[1]?u[1]:"0x",a=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)],i=0,o=a;case 1:if(!(i<o.length)){t.n=4;break}return s=o[i],t.n=2,s(n,r);case 2:if(!t.v){t.n=3;break}return t.a(2,!0);case 3:i++,t.n=1;break;case 4:return t.a(2,!1)}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"getEnvironmentInfo",value:(n=a(e().m(function t(){var n;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(F.getEnvironmentInfo,void 0);case 1:return n=t.v,t.a(2,n.data)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"requestAddressBook",value:(t=a(e().m(function t(){var n;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(F.requestAddressBook,void 0);case 1:return n=t.v,t.a(2,n.data)}},t,this)})),function(){return t.apply(this,arguments)})}]);var t,n,r,o,s,u,c,l,f,p}();it([function(t,n,r){var i=r.value;return r.value=a(e().m(function t(){var r,a;return e().w(function(t){for(;;)switch(t.n){case 0:return r=new rt(this.communicator),t.n=1,r.getPermissions();case 1:if(a=t.v,at(n,a)){t.n=3;break}return t.n=2,r.requestPermissions([p({},n,{})]);case 2:a=t.v;case 3:if(at(n,a)){t.n=4;break}throw new nt("Permissions rejected",et);case 4:return t.a(2,i.apply(this))}},t,this)})),r}],ot.prototype,"requestAddressBook",null);var st=d(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t);var n=e.allowedDomains,r=void 0===n?null:n,a=e.debug,i=void 0!==a&&a;this.communicator=new Z(r,i),this.eth=new tt(this.communicator),this.txs=new Q(this.communicator),this.safe=new ot(this.communicator),this.wallet=new rt(this.communicator)});n("default",st)}}})}();
